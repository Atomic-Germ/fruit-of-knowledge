% Book header: preamble and document begin for the combined book
\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
% Book layout with asymmetric margins for binding
\usepackage{geometry}
\geometry{
  paperwidth=8.5in,
  paperheight=11in,
  inner=1.5in,        % Larger margin for binding
  outer=0.75in,       % Smaller outer margin
  top=1in,
  bottom=1.2in,
  twoside             % Different margins for odd/even pages
}
\usepackage{microtype}
% Page layout with footer for footnotes
\usepackage{fancyhdr}
\usepackage{paracol}
\usepackage{geometry}

% Custom footer: page number centered (raised), notes added by fragments
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\raisebox{2\baselineskip}{\thepage}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% Configure paracol for synchronized footnotes
\footnotelayout{m}

% Support for footnotes inside boxes (savenotes environment)
\usepackage{footnote}
% Hyperref temporarily disabled for combined book build to avoid
% PDF string/TOC issues during automated concatenation. Re-enable
% after sanitizing section titles or when using safe PDF string options.
% Hyperref: enable with safe options for combined book build. We also
% define safe replacements for commands that could appear in section
% titles so hyperref's PDF string conversion won't fail.
\usepackage[unicode=true,pdfencoding=auto,bookmarks=true,bookmarksopen=true]{hyperref}

% Ragged2e for better justification
\usepackage{ragged2e}

\usepackage{parskip}
\setlength{\parskip}{6pt}
\setlength{\parindent}{12pt}
% Increase column separation for two-column layouts
\setlength{\columnsep}{0.5in}
\providecommand{\tightlist}{%
	\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}%
}
% Gray box for blockquotes with rounded corners
\usepackage{tcolorbox}
\definecolor{grayquotebg}{HTML}{F3F3F3}
\newenvironment{grayquote}{%
	\begin{tcolorbox}[colback=grayquotebg,colframe=grayquotebg,arc=3pt,boxrule=0pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}

% Custom div boxes (warning, note, info, tip, caution, example, aside)
\definecolor{warningbg}{HTML}{FFF3CD}
\definecolor{warningborder}{HTML}{FFC107}
\definecolor{notebg}{HTML}{E7F3FF}
\definecolor{noteborder}{HTML}{2196F3}
\definecolor{infobg}{HTML}{E8F4F8}
\definecolor{infoborder}{HTML}{00BCD4}
\definecolor{tipbg}{HTML}{E8F5E9}
\definecolor{tipborder}{HTML}{4CAF50}
\definecolor{cautionbg}{HTML}{FFEBEE}
\definecolor{cautionborder}{HTML}{F44336}
\definecolor{examplebg}{HTML}{F3E5F5}
\definecolor{exampleborder}{HTML}{9C27B0}
\definecolor{asidebg}{HTML}{FAFAFA}
\definecolor{asideborder}{HTML}{757575}

\newenvironment{warningbox}{%
	\begin{tcolorbox}[colback=warningbg,colframe=warningborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{notebox}{%
	\begin{tcolorbox}[colback=notebg,colframe=noteborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{infobox}{%
	\begin{tcolorbox}[colback=infobg,colframe=infoborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{tipbox}{%
	\begin{tcolorbox}[colback=tipbg,colframe=tipborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{cautionbox}{%
	\begin{tcolorbox}[colback=cautionbg,colframe=cautionborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{examplebox}{%
	\begin{tcolorbox}[colback=examplebg,colframe=exampleborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}
\newenvironment{asidebox}{%
	\begin{tcolorbox}[colback=asidebg,colframe=asideborder,arc=3pt,boxrule=1pt,left=8pt,right=8pt,top=8pt,bottom=8pt,beforeskip=6pt,afterskip=6pt]
}{%
	\end{tcolorbox}
}

% Highlight support for inline spans
\usepackage{soul}
\newcommand{\hl}[1]{\colorbox{yellow}{#1}}
\begin{document}
\tableofcontents
\clearpage
